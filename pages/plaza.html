<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plaza — Fantasy Castle Town</title>
  <link rel="stylesheet" href="../assets/css/style.css">

  <!-- Three.js + VRM for fallback loader (only used if your engine doesn't provide loadCharacter) -->
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.160.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://unpkg.com/@pixiv/three-vrm@2.0.6/lib/three-vrm.min.js"></script>

  <script defer src="../assets/js/main.js"></script>
</head>
<body class="plaza-body">
  <header class="town-header glass">
    <a class="brand" href="../index.html">⮐ Back to Town</a>
    <h1>Plaza</h1>
    <p class="subtitle">Summon everyone to the square</p>
  </header>

  <main class="plaza-main">
    <section class="plaza-card glass">
      <h2>Load All Characters</h2>
      <p>Spawn all assistants together for training, ceremonies, or photo ops.</p>

      <div class="btn-row">
        <button class="btn btn-primary btn-xl" onclick="loadAllCharacters()">
          ✨ Summon All 15
        </button>

        <button class="btn btn-outline" onclick="try{clearCharacters&&clearCharacters()}catch(e){}">
          ⛔ Clear Plaza
        </button>
      </div>

      <small class="helper">
        Tip: VRM files live in <code>assets/models/</code> — lowercase, no spaces.
      </small>
    </section>

    <!-- Fallback canvas (used only if loadCharacter fallback initializes) -->
    <section class="plaza-card glass">
      <h2>Plaza Viewer</h2>
      <p>If your site already shows models elsewhere, this will simply remain blank.</p>
      <div id="plaza-canvas-wrap">
        <canvas id="plaza-canvas"></canvas>
      </div>
    </section>

    <section class="plaza-help glass">
      <details>
        <summary>Having trouble?</summary>
        <ul>
          <li>Open DevTools → Console to see any load errors.</li>
          <li>Filenames must exactly match <code>*.vrm</code> in <code>assets/models/</code>.</li>
          <li>If avatars overlap, the grid auto-arranger will space them when possible.</li>
        </ul>
      </details>
    </section>
  </main>
</body>
</html>
